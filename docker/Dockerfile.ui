# Optional Web UI Image for Robot System
# OBSERVATION ONLY - NO CONTROL AUTHORITY
# UI can display state and trigger planning, but cannot command motors

FROM node:18-alpine

WORKDIR /app

# Install dependencies for ROS 2 web bridge
RUN apk add --no-cache python3 py3-pip

# Install rosbridge for web communication
RUN pip3 install roslibpy

# Copy UI source
COPY src/robot_ui/ /app/

# Install Node dependencies (if package.json exists)
RUN if [ -f package.json ]; then npm install; fi

# Expose UI port
EXPOSE 8080

# Health check
HEALTHCHECK --interval=30s --timeout=3s \
    CMD wget --no-verbose --tries=1 --spider http://localhost:8080/ || exit 1

CMD ["node", "server.js"]
